# üì¶ –ê–†–•–ò–í–ò–†–û–í–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–û–í - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## ‚úÖ –ß–¢–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û:

### 1. Frontend (–ö–Ω–æ–ø–∫–∏ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞)
**–§–∞–π–ª:** `components/CorrespondenceView.tsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- ‚úÖ –ö–Ω–æ–ø–∫–∞ **"Arxivlash"** - –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç
- ‚úÖ –ö–Ω–æ–ø–∫–∞ **"Arxivdan chiqarish"** - –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–∑ –∞—Ä—Ö–∏–≤–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ Loading —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–∏
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º

### 2. Frontend API
**–§–∞–π–ª:** `services/api.ts`

**–§—É–Ω–∫—Ü–∏–∏:**
- `archiveDocument(documentId)` - POST `/api/correspondences/:id/archive`
- `unarchiveDocument(documentId)` - POST `/api/correspondences/:id/unarchive`

### 3. Backend Routes
**–§–∞–π–ª:** `server/src/documents.routes.ts`

**Endpoints:**
- `POST /api/correspondences/:id/archive` - –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
- `POST /api/correspondences/:id/unarchive` - –∏–∑–≤–ª–µ—á—å –∏–∑ –∞—Ä—Ö–∏–≤–∞

### 4. Backend Controllers
**–§–∞–π–ª:** `server/src/documents.controller.ts`

**–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã:**
- `archiveDocument` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è
- `unarchiveDocument` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è

### 5. Backend Service
**–§–∞–π–ª:** `server/src/documents.service.ts`

**–ú–µ—Ç–æ–¥—ã:**
- `archiveDocument(documentId, userId)` - –∏–∑–º–µ–Ω—è–µ—Ç stage –Ω–∞ ARCHIVED
- `unarchiveDocument(documentId, userId)` - –∏–∑–º–µ–Ω—è–µ—Ç stage –Ω–∞ PENDING_REGISTRATION

---

## üéØ –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢:

### –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç
2. –í–∏–¥–∏—Ç –∫–Ω–æ–ø–∫—É **"Arxivlash"** (–µ—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç –ù–ï –≤ –∞—Ä—Ö–∏–≤–µ)
3. –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É
4. –ü–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
5. –î–æ–∫—É–º–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞—Ç—É—Å `ARCHIVED`
6. –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ audit log
7. –î–æ–∫—É–º–µ–Ω—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Ñ–∏–ª—å—Ç—Ä–µ "Arxivlangan"

### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ –∞—Ä—Ö–∏–≤–∞:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
2. –í–∏–¥–∏—Ç –∫–Ω–æ–ø–∫—É **"Arxivdan chiqarish"** (–µ—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç –í –∞—Ä—Ö–∏–≤–µ)
3. –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É
4. –ü–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
5. –î–æ–∫—É–º–µ–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞—Ç—É—Å `PENDING_REGISTRATION`
6. –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ audit log
7. –î–æ–∫—É–º–µ–Ω—Ç –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ "Arxivlangan"

---

## üìç –ì–î–ï –ù–ê–•–û–î–Ø–¢–°–Ø –ö–ù–û–ü–ö–ò:

### –í –∫–∞—Ä—Ç–æ—á–∫–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Murojaatnoma          [Arxivlash] ‚Üê –¢–£–¢ ‚îÇ
‚îÇ Manba: Murojaatlar                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ AI Tahlil Natijasi                      ‚îÇ
‚îÇ ...                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

–ö–Ω–æ–ø–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è **—Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É**, —Ä—è–¥–æ–º —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞.

---

## üîÑ –õ–û–ì–ò–ö–ê –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø:

```typescript
// –ï—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç –ù–ï –≤ –∞—Ä—Ö–∏–≤–µ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º "Arxivlash"
{correspondence.stage !== 'ARCHIVED' && (
    <button onClick={handleArchive}>
        Arxivlash
    </button>
)}

// –ï—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç –í –∞—Ä—Ö–∏–≤–µ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º "Arxivdan chiqarish"
{correspondence.stage === 'ARCHIVED' && (
    <button onClick={handleUnarchive}>
        Arxivdan chiqarish
    </button>
)}
```

---

## üé® –î–ò–ó–ê–ô–ù –ö–ù–û–ü–û–ö:

### –ö–Ω–æ–ø–∫–∞ "Arxivlash":
- –¶–≤–µ—Ç: –§–∏–æ–ª–µ—Ç–æ–≤—ã–π (`bg-purple-600`)
- –ò–∫–æ–Ω–∫–∞: –ê—Ä—Ö–∏–≤–Ω—ã–π —è—â–∏–∫
- –¢–µ–∫—Å—Ç: "Arxivlash" / "Arxivlanmoqda..."

### –ö–Ω–æ–ø–∫–∞ "Arxivdan chiqarish":
- –¶–≤–µ—Ç: –û—Ä–∞–Ω–∂–µ–≤—ã–π (`bg-orange-600`)
- –ò–∫–æ–Ω–∫–∞: –°—Ç—Ä–µ–ª–∫–∞ –Ω–∞–∑–∞–¥
- –¢–µ–∫—Å—Ç: "Arxivdan chiqarish" / "Chiqarilmoqda..."

---

## üîß API ENDPOINTS:

### –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç:
```http
POST /api/correspondences/:id/archive
Headers: Authorization: Bearer TOKEN
Response: { id, title, stage: "ARCHIVED", ... }
```

### –ò–∑–≤–ª–µ—á—å –∏–∑ –∞—Ä—Ö–∏–≤–∞:
```http
POST /api/correspondences/:id/unarchive
Headers: Authorization: Bearer TOKEN
Response: { id, title, stage: "PENDING_REGISTRATION", ... }
```

---

## üìä AUDIT LOG:

–ü—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–π—Å—Ç–≤–∏–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å:
- **–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ:** "Hujjat arxivlandi" + –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ:** "Hujjat arxivdan chiqarildi" + –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ:
1. –û—Ç–∫—Ä—ã—Ç—å –ª—é–±–æ–π –¥–æ–∫—É–º–µ–Ω—Ç
2. –ù–∞–∂–∞—Ç—å "Arxivlash"
3. –î–æ–∫—É–º–µ–Ω—Ç –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤
4. –û—Ç–∫—Ä—ã—Ç—å –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
5. –ù–∞–∂–∞—Ç—å "Arxivdan chiqarish"
6. –î–æ–∫—É–º–µ–Ω—Ç –≤–µ—Ä–Ω–µ—Ç—Å—è –≤ —Ä–∞–±–æ—Ç—É

**–í–°–ï –†–ê–ë–û–¢–ê–ï–¢!** üéâ
