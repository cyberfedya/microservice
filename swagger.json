{
  "openapi": "3.0.3",
  "info": {
    "title": "DocManageApp API",
    "version": "1.2.0",
    "description": "üíº **Agrobank Executive Discipline System API** ‚Äî –µ–¥–∏–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏, –ø–µ—Ä–µ–ø–∏—Å–∫–∞–º–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Ä–æ–ª—è–º–∏ –≤–Ω—É—Ç—Ä–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏.",
    "contact": {
      "name": "Agrobank IT Department",
      "email": "support@agrobank.uz",
      "url": "https://agrobank.uz"
    },
    "license": {
      "name": "MIT License",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    { "url": "https://api.agrobank.uz/v1", "description": "Production Server" },
    { "url": "https://staging.agrobank.uz/v1", "description": "Staging Server" }
  ],
  "tags": [
    { "name": "User Management", "description": "üë§ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –æ—Ç–¥–µ–ª–∞–º–∏ –±–∞–Ω–∫–∞" },
    { "name": "Role Management", "description": "üß© –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ –∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞" },
    { "name": "Correspondence", "description": "üìÑ –í—Ö–æ–¥—è—â–∞—è –∏ –∏—Å—Ö–æ–¥—è—â–∞—è –∫–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ü–∏—è –º–µ–∂–¥—É –æ—Ç–¥–µ–ª–∞–º–∏" }
  ],
  "paths": {
    "/users": {
      "get": {
        "summary": "–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
        "operationId": "getUsers",
        "tags": ["User Management"],
        "parameters": [
          { "name": "limit", "in": "query", "schema": { "type": "integer", "default": 20 }, "description": "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ" },
          { "name": "offset", "in": "query", "schema": { "type": "integer", "default": 0 }, "description": "–°–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏" }
        ],
        "responses": {
          "200": {
            "description": "–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/User" }
                },
                "examples": {
                  "default": {
                    "summary": "–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
                    "value": [
                      { "id": 1, "name": "Ali Akbarov", "email": "ali@agrobank.uz", "role": "Manager", "department": "HR" },
                      { "id": 2, "name": "Dilnoza Karimova", "email": "dilnoza@agrobank.uz", "role": "Employee", "department": "Finance" }
                    ]
                  }
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" }
        }
      },
      "post": {
        "summary": "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
        "operationId": "createUser",
        "tags": ["User Management"],
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/UserInput" } } }
        },
        "responses": {
          "201": { "$ref": "#/components/responses/UserResponse" },
          "400": { "$ref": "#/components/responses/BadRequest" }
        }
      }
    },

    "/roles": {
      "get": {
        "summary": "–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π",
        "operationId": "getRoles",
        "tags": ["Role Management"],
        "responses": {
          "200": {
            "description": "–°–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π –≤ —Å–∏—Å—Ç–µ–º–µ",
            "content": {
              "application/json": {
                "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Role" } }
              }
            }
          }
        }
      },
      "post": {
        "summary": "–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ä–æ–ª—å",
        "operationId": "createRole",
        "tags": ["Role Management"],
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/RoleInput" } } }
        },
        "responses": {
          "201": { "$ref": "#/components/responses/RoleResponse" },
          "400": { "$ref": "#/components/responses/BadRequest" }
        }
      }
    },

    "/correspondences": {
      "get": {
        "summary": "–ü–æ–ª—É—á–∏—Ç—å –∫–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ü–∏–∏ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
        "description": "–†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–æ–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –≤–∏–¥—è—Ç –≤—Ö–æ–¥—è—â–∏–µ, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ ‚Äî –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –∏–º –¥–æ–∫—É–º–µ–Ω—Ç—ã.",
        "operationId": "getCorrespondences",
        "tags": ["Correspondence"],
        "responses": {
          "200": {
            "description": "–°–ø–∏—Å–æ–∫ –∫–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ü–∏–π",
            "content": {
              "application/json": {
                "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Correspondence" } },
                "examples": {
                  "incoming": {
                    "summary": "–ü—Ä–∏–º–µ—Ä –≤—Ö–æ–¥—è—â–µ–π –∫–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ü–∏–∏",
                    "value": [
                      {
                        "id": 1,
                        "type": "Kiruvchi",
                        "title": "Tahlil hisobotlari",
                        "content": "Departamentdan kelgan hujjatlar.",
                        "source": "HR Department",
                        "stage": "Yangi",
                        "deadline": "2025-11-10T00:00:00Z",
                        "department": "Bosh ofis",
                        "mainExecutorId": 2
                      }
                    ]
                  }
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" }
        }
      }
    }
  },

  "components": {
    "schemas": {
      "User": {
        "type": "object",
        "required": ["id", "name", "email"],
        "properties": {
          "id": { "type": "integer", "example": 1 },
          "name": { "type": "string", "example": "Ali Akbarov" },
          "email": { "type": "string", "format": "email", "example": "ali@agrobank.uz" },
          "role": { "type": "string", "example": "Manager" },
          "department": { "type": "string", "example": "Finance" },
          "managerId": { "type": "integer", "example": 5 }
        }
      },
      "UserInput": {
        "type": "object",
        "required": ["name", "email"],
        "properties": {
          "name": { "type": "string", "example": "Dilnoza Karimova" },
          "email": { "type": "string", "example": "dilnoza@agrobank.uz" },
          "role": { "type": "string", "example": "Employee" },
          "department": { "type": "string", "example": "Finance" }
        }
      },
      "Role": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "example": "admin" },
          "name": { "type": "string", "example": "Administrator" },
          "description": { "type": "string", "example": "Full access to system settings" }
        }
      },
      "RoleInput": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": { "type": "string", "example": "Manager" },
          "description": { "type": "string", "example": "Can manage documents and users" }
        }
      },
      "Correspondence": {
        "type": "object",
        "properties": {
          "id": { "type": "integer", "example": 1 },
          "type": { "type": "string", "enum": ["Kiruvchi", "Chiquvchi"], "example": "Kiruvchi" },
          "title": { "type": "string", "example": "Hisobot" },
          "content": { "type": "string", "example": "2025-yil 1-chorak faoliyati bo‚Äòyicha hisobot" },
          "source": { "type": "string", "example": "Markaziy bo‚Äòlim" },
          "stage": { "type": "string", "example": "Yangi" },
          "deadline": { "type": "string", "format": "date-time", "example": "2025-11-10T00:00:00Z" },
          "department": { "type": "string", "example": "Bosh ofis" },
          "mainExecutorId": { "type": "integer", "example": 2 }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "status": { "type": "integer", "example": 400 },
          "message": { "type": "string", "example": "Invalid input data" },
          "details": { "type": "string", "example": "Email format is invalid" }
        }
      }
    },
    "responses": {
      "UserResponse": {
        "description": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ",
        "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
      },
      "RoleResponse": {
        "description": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–æ–ª–∏",
        "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Role" } } }
      },
      "BadRequest": {
        "description": "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ",
        "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } }
      },
      "Unauthorized": {
        "description": "–ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø",
        "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Error" } } }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  },
  "security": [{ "bearerAuth": [] }]
}
